<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes, viewport-fit=cover"  />
  <title i18n="nav_title"></title>
  <meta name="descriptison">
  <meta name="keywords" content="联想语音,乐语音,联想小乐,联想语音平台,联想语音助手,moto语音助手,摩托语音助手,摩托语音,moto语音,小乐语音助手,小乐语音,联想智能语音,小乐小乐">

  <!-- Favicons -->
  <link href="../assets/img/favicon.ico" rel="icon">

  <!-- Vendor CSS Files -->
  <link href="../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../assets/vendor/animate.css/animate.min.css" rel="stylesheet">
  <link href="../assets/vendor/icofont/icofont.min.css" rel="stylesheet">
  <link href="../assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="../assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="../assets/vendor/sweetalert/bootstrap-4.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link rel="stylesheet" href="../assets/css/only.css">
  <link href="../assets/css/style.css" rel="stylesheet">
</head>

<body>

  <!-- ======= Header ======= -->
  <div id="head-page"></div>
  <div id="head-page"></div>
    <section class="control" id="head">
      <div class="head-bg d-flex justify-content-center align-items-center">
        <h2 i18n="control"></h2>
      </div>
      <div class="bight"></div>
    </section><!-- End header Section -->
  <main id="main" class="control-main">

    <!-- ======= document Section ======= -->
    <section class="control-main-section">
      <div class="container">
        <div class="control-bg">
            <div class="con-title">
              <span style="font-size:20px;">服务整体可用状态</span>
              <span class="success">正常</span>
            </div>
            <div class="main_m">
            </div>
        </div>
      </div>
    </section><!-- End main Section -->
  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer">
      <div class="container">
        <div class="copyright">
            <span i18n="footerFAQ"></span> 
            <a href="./contact.html"></a>
        </div>
      </div>
    </footer><!-- End Footer -->
  <!-- Vendor JS Files -->
  <script src="../assets/vendor/jquery/jquery.min.js"></script>
  <script src="../assets/vendor/jquery.Base64/jquery.base64.js"></script>
  <script src="../assets/js/common/iflogin.js"></script>
  <script src="../assets/js/common/isIE.js"></script>
  <script src="../i18n/ehi-i18n.js"></script>
  <script src="../assets/vendor/bootstrap/js/bootstrap.min.js"></script>
  <script src="../assets/vendor/aos/aos.js"></script>
  <script src="../assets/vendor/sweetalert/sweetalert2.min.js"></script>
  <script src="../assets/vendor/recorder-core/recorder.wav.min.js"></script>
  <script src="../assets/vendor/recorder-core/waveview.js"></script>
  <script src="../assets/vendor/md5/md5.js"></script>

  <!-- Template Main JS File -->
  <script src="../assets/js/common/url.js"></script>
  <script src="../assets/js/common/main.js"></script>
  

</body>
<script>
  $(function(){
    $('#head-page').load('../assets/head/header.html')
  })
</script>
<script>
  var serverList = []
  setTimeout(()=>{
    getServerStatus()
  },2000)
  function getServerStatus(){
    $.ajax({
      url:'https://voice.lenovomm.com/task/smb/status',
      type:'post',
      success:(res)=>{
        if(res.errorcode != 1024){
          var vhtml = ''
          for(let prop in res) {
            serverList.push({
                  name: prop,
                  status: res[prop]
              })
          }
          $.each(serverList,(idx,val)=>{
            vhtml +=`<div class="main_map">
                        <div class="${classVal(val.status)}">
                            <span class="m_ser">${val.name}</span>
                            <span class="m_state">${statusVal(val.status)}</span>
                        </div>
                    </div>`
          })
          $('.main_m').append(vhtml)
        }else{
          localStorage.clear();
          // Swal.fire({
          //   text: i18n.get('logTimeOut'),
          //   showCancelButton: true,
          //   allowOutsideClick:false,
          //   allowEscapeKey:false,
          //   reverseButtons:true,
          //   width:'16em',
          //   confirmButtonColor: '#94cb82',
          //   cancelButtonColor: '#d33',
          //   confirmButtonText: i18n.get('confirm'),
          //   cancelButtonText:i18n.get('cancel')
          // }).then((result) => {
          //   if (result.isConfirmed) {
              var url = window.location.href
              window.localStorage.setItem('returnurl',url)
              window.location.href = '../login/login.html'
          //   }
          // })
        }
        
      },
      error:function(){
        Swal.fire({
            text:i18n.get('server_error'),
            confirmButtonText: i18n.get('confirm'),
            confirmButtonColor: '#94cb82'
        })
      }
    })
  }
  function statusVal(v){
    if(v == 0){
      return '正常'
    }
    if(v == 1){
      return '异常'
    }
  }
  function classVal(v){
    if(v == 0){
      return 'normal_line'
    }else{
      return 'abnormal_line'
    }
  }
</script>
</html>